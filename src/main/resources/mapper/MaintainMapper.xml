<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.youke.dao.MaintainMapper">
  <resultMap id="BaseResultMap" type="com.youke.entity.Maintain">
    <!--@mbg.generated-->
    <!--@Table maintain-->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="shorps_id" jdbcType="INTEGER" property="shorpsId" />
    <result column="user_id" jdbcType="INTEGER" property="userId" />
    <result column="reson" jdbcType="VARCHAR" property="reson" />
    <result column="maintain_status" jdbcType="INTEGER" property="maintainStatus" />
    <result column="end" jdbcType="VARCHAR" property="end" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="update_time" jdbcType="TIMESTAMP" property="updateTime" />
    <result column="status" jdbcType="OTHER" property="status" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--@mbg.generated-->
    id, shorps_id, user_id, reson, maintain_status, `end`, create_time, update_time, 
    `status`
  </sql>
    <select id="listBackMaintain" resultType="com.youke.entity.Maintain">
      SELECT
          a.*,
          b.company AS shopsName,
          c.phone,
          c.nick_name,
          d.order_no
      FROM
          maintain AS a
          LEFT JOIN shops AS b ON a.shorps_id = b.id
          LEFT JOIN `user` AS c ON a.user_id = c.id
          LEFT JOIN `order` AS d ON a.order_id = d.id
        <if test="userId != null ">
          WHERE a.user_id=#{userId,jdbcType=INTEGER}
        </if>
    </select>
</mapper>